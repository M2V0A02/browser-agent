# AI Browser Agent

AI-агент для автономного управления браузером через естественный язык. Использует LLM (через OpenRouter API) для интерпретации задач и Rod для автоматизации браузера.

## Возможности

- Автономное выполнение задач в браузере на естественном языке
- Поддержка сложных сценариев (навигация, клики, заполнение форм, скроллинг)
- Извлечение структурированных данных со страниц
- Взаимодействие с пользователем (вопросы, ожидание действий)
- ReAct паттерн для рассуждений и действий

## Требования

- **Go 1.24.4+** - язык программирования
- **Chrome/Chromium** - браузер для автоматизации
- **OpenRouter API Key** - для доступа к LLM моделям

## Быстрый старт

### 1. Клонирование репозитория

```bash
git clone <repository-url>
cd ai-agent
```

### 2. Настройка переменных окружения

Скопируйте `.env.example` в `.env` и заполните своими ключами:

```bash
cp .env.example .env
```

Отредактируйте `.env`:

```bash
OPENROUTER_API_KEY=ваш-ключ-openrouter
OPENROUTER_MODEL_NAME=amazon/nova-2-lite-v1:free
```

### 3. Установка зависимостей

Зависимости установятся автоматически при первой сборке, но можно установить явно:

```bash
make deps
```

### 4. Сборка

```bash
make build
```

Бинарник будет создан в `build/ai-agent`

### 5. Запуск

```bash
make run
```

или запустите бинарник напрямую:

```bash
./build/ai-agent
```

## Доступные команды Make

| Команда | Описание |
|---------|----------|
| `make help` | Показать все доступные команды |
| `make build` | Собрать бинарный файл в `build/` |
| `make run` | Запустить агента напрямую через `go run` |
| `make test` | Запустить все тесты |
| `make test-coverage` | Запустить тесты с отчетом о покрытии |
| `make clean` | Удалить собранные файлы |
| `make install` | Установить в `$GOPATH/bin` |
| `make deps` | Установить/обновить зависимости |

## Использование

После запуска агент откроет браузер и будет ждать ваших команд. Примеры задач:

- "Открой google.com и найди информацию о Go"
- "Зайди на github.com, найди репозиторий golang/go и покажи количество звезд"
- "Открой новостной сайт и покажи заголовки последних 5 новостей"

## Архитектура

Проект построен по принципам Clean Architecture:

```
internal/
├── domain/          # Доменные сущности и правила
├── application/     # Порты приложения
├── usecase/         # Бизнес-логика (ReAct executor)
├── adapter/         # Адаптеры (tools)
└── infrastructure/  # Внешние зависимости (browser, LLM)
```

## Инструменты агента

- `navigate` - Навигация по URL
- `click` - Клик по элементам (одиночный и batch)
- `fill` - Заполнение форм (одиночное и batch)
- `scroll` - Прокрутка страницы
- `observe` - Анализ содержимого страницы
- `query_elements` - Извлечение структурированных данных
- `search` - Поиск на странице (текст, ID, атрибуты)
- `screenshot` - Снимок экрана
- `press_enter` - Нажатие Enter
- `ask_question` - Задать вопрос пользователю
- `wait_user_action` - Ожидание действия пользователя

## Разработка

### Структура проекта

```
.
├── cmd/agent/           # Точка входа
├── internal/            # Код приложения
│   ├── adapter/         # Реализация инструментов
│   ├── application/     # Порты
│   ├── domain/          # Доменная модель
│   ├── infrastructure/  # Внешние сервисы
│   ├── usecase/         # Use cases
│   └── di/              # Dependency injection
├── prompts/             # Системные промпты
├── build/               # Собранные бинарники
├── Makefile            # Команды сборки
├── go.mod              # Зависимости Go
└── README.md           # Документация
```

### Запуск тестов

```bash
make test
```

Тесты с покрытием:

```bash
make test-coverage
```

Откроется `coverage.html` с визуализацией покрытия кода.

## Конфигурация

Все настройки через переменные окружения в `.env`:

| Переменная | Описание | Пример |
|-----------|----------|---------|
| `OPENROUTER_API_KEY` | API ключ OpenRouter | `sk-or-v1-...` |
| `OPENROUTER_MODEL_NAME` | Модель для использования | `amazon/nova-2-lite-v1:free` |

## Установка в систему

Для установки агента в `$GOPATH/bin`:

```bash
make install
```

После этого можно запускать из любой директории:

```bash
ai-agent
```

## Лицензия

MIT
